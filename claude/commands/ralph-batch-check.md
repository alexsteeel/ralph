---
name: ralph-batch-check
description: Run full test suite after batch implementation, fix indirect issues
arguments:
  - name: task_refs
    description: List of completed task references (e.g., "project#1 project#2 project#3")
    required: true
---

–ó–∞–ø—É—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤—å –∫–æ—Å–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

## –¶–µ–ª—å

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∫–æ—Å–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á
- –°–ª–æ–º–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö
- –†–µ–≥—Ä–µ—Å—Å–∏–∏ –≤ –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã—Ö –Ω–∞–ø—Ä—è–º—É—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

–¢–∞–∫–∂–µ –Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å —É—Ä–æ–∫–∏ –∏–∑ –ª–æ–≥–æ–≤ ‚Äî –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –æ—à–∏–±–∫–∏, –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–µ –≤—Ä–µ–º—è, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã.

**Task references:** `$ARGUMENTS`

## Workflow

### 1. –°–æ–∑–¥–∞–π –∑–∞–¥–∞—á—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ md-task-mcp

–û–ø–∏—Å–∞–Ω–∏–µ: "Batch check after tasks: <—Å–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤>"

### 2. –ü–æ–ª—É—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–º–∏—Ç–∞—Ö –∏–∑ –∑–∞–¥–∞—á

–î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ –∏–∑–≤–ª–µ–∫–∏ commit hash –∏–∑ –ø–æ–ª—è `report`.

### 3. –ó–∞–ø—É—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤

```bash
pytest -v --tb=short 2>&1 || true
```

### 4. –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ failing tests

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞–¥–∞—é—â–µ–≥–æ —Ç–µ—Å—Ç–∞:

1. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–∏—á–∏–Ω—É** ‚Äî –∫–∞–∫–æ–π –∫–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É
2. **–û–ø—Ä–µ–¥–µ–ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫** ‚Äî –∏–∑ –∫–∞–∫–æ–π –∑–∞–¥–∞—á–∏/–∫–æ–º–º–∏—Ç–∞ –ø—Ä–∏—à–ª–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
3. **–ò—Å–ø—Ä–∞–≤—å –ø—Ä–æ–±–ª–µ–º—É** ‚Äî –≤–Ω–µ—Å–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. **–ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ** ‚Äî —É–±–µ–¥–∏—Å—å —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 5. –°–æ–∑–¥–∞–π –∫–æ–º–º–∏—Ç –µ—Å–ª–∏ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
git add -A
git commit -m "Fix indirect issues from batch #N #M #K"
```

### 6. –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–¶–µ–ª—å**: –Ω–∞–π—Ç–∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã, –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, —á—Ç–æ–±—ã —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ.

#### –®–∞–≥ 1: –ü—Ä–æ—á–∏—Ç–∞–π –ª–æ–≥–∏ –∑–∞–¥–∞—á

–õ–æ–≥–∏ –ª–µ–∂–∞—Ç –≤ `~/.claude/logs/ralph-implement/`. –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ—á–∏—Ç–∞–π `.log` —Ñ–∞–π–ª (–≤—Å–µ attempt'—ã –µ—Å–ª–∏ –±—ã–ª–∏):

```bash
ls -la ~/.claude/logs/ralph-implement/ | grep "<project>_<N>"
```

–ü—Ä–æ—á–∏—Ç–∞–π –∫–∞–∂–¥—ã–π –ª–æ–≥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ Read tool.

#### –®–∞–≥ 2: –ò—â–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–±–ª–µ–º

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–æ–≥–∞ –æ–ø—Ä–µ–¥–µ–ª–∏:

**–ü–æ—Ç–µ—Ä—è–Ω–Ω–æ–µ –≤—Ä–µ–º—è (debugging loops):**
- –°–µ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥ curl/docker —Å –æ—à–∏–±–∫–∞–º–∏ (3+ –ø–æ–¥—Ä—è–¥ –Ω–∞ –æ–¥–Ω—É —Ç–µ–º—É)
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Ä–∞–∑–Ω—ã–º —Ö–æ—Å—Ç–∞–º/–ø–æ—Ä—Ç–∞–º
- –î–ª–∏–Ω–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã (>5 –º–∏–Ω—É—Ç), –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è —Ç–µ–∫—Å—Ç –æ—à–∏–±–æ–∫ ("405", "connection refused", "tinyproxy", etc.)

**–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏:**
- –û–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –æ—à–∏–±–∫–∞ –≤ —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö
- –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ workaround, –Ω–∞–π–¥–µ–Ω–Ω—ã–π –∑–∞–Ω–æ–≤–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ç—ã–∫–∞—é—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ

**–ü–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ attempt'—ã:**
- Context overflow –∏–∑-–∑–∞ rate limit —Å–ø–∞–º–∞
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ —Å –Ω—É–ª—è –∏–∑-–∑–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏–º—ã—Ö –æ—à–∏–±–æ–∫

#### –®–∞–≥ 3: –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–π –∏ –∑–∞–ø–∏—à–∏

–î–ª—è –∫–∞–∂–¥–æ–π –Ω–∞–π–¥–µ–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã –æ–ø—Ä–µ–¥–µ–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:

**A. –†–µ—à–∞–µ–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π ‚Üí –æ–±–Ω–æ–≤–∏ CLAUDE.md**

–≠—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–µ–¥—É—é—â–∏–π –∞–≥–µ–Ω—Ç –Ω–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç, –µ—Å–ª–∏ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç CLAUDE.md:
- –ù–µ–æ—á–µ–≤–∏–¥–Ω—ã–µ URL/–ø–æ—Ä—Ç—ã/—Ä–æ—É—Ç—ã (e.g., "–ª–æ–≥–∏–Ω –Ω–∞ GET /, –∞ –Ω–µ GET /login")
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å–∫–∞/–¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–∏—Å–∞–º
- Workaround'—ã –¥–ª—è –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

–ó–∞–ø–∏—à–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π CLAUDE.md:
- –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã ‚Üí `/workspace/CLAUDE.md`
- –ü—Ä–æ–±–ª–µ–º—ã —Å–µ—Ä–≤–∏—Å–∞ ‚Üí `/workspace/services/<service>/CLAUDE.md`
- –ü—Ä–æ–±–ª–µ–º—ã —Ç–µ—Å—Ç–æ–≤ ‚Üí `/workspace/services/<service>/tests/CLAUDE.md`

–§–æ—Ä–º–∞—Ç:
```markdown
## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### <–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ>
**–ü—Ä–æ–±–ª–µ–º–∞**: <—á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç>
**–†–µ—à–µ–Ω–∏–µ**: <—á—Ç–æ –¥–µ–ª–∞—Ç—å>
```

**–ë. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã ‚Üí —Ç–æ–ª—å–∫–æ –≤ –æ—Ç—á—ë—Ç**

–≠—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ª—å–∑—è —Ä–µ—à–∏—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- Playwright MCP –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ tinyproxy –≤ devcontainer
- Rate limit –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö
- –°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- –ü—Ä–æ–±–ª–µ–º—ã —Å auth/tokens –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

–≠—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã **–ù–ï –ø–∏—à—É—Ç—Å—è –≤ CLAUDE.md** ‚Äî –æ–Ω–∏ —Ç—Ä–µ–±—É—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ.

### 7. –ó–∞–ø–∏—à–∏ –æ—Ç—á—ë—Ç –≤ –∑–∞–¥–∞—á—É –ø—Ä–æ–≤–µ—Ä–∫–∏

–í –ø–æ–ª–µ `report` —É–∫–∞–∂–∏ –î–í–ê —Ä–∞–∑–¥–µ–ª–∞:

**–†–∞–∑–¥–µ–ª 1: –¢–µ—Å—Ç—ã**
- –°—Ç–∞—Ç—É—Å: –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ / –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ N –ø—Ä–æ–±–ª–µ–º
- –î–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–±–ª–µ–º—ã: —Ç–µ—Å—Ç, –æ—à–∏–±–∫–∞, –∏—Å—Ç–æ—á–Ω–∏–∫ (–∑–∞–¥–∞—á–∞/–∫–æ–º–º–∏—Ç), –ø—Ä–∏—á–∏–Ω–∞, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –ö–æ–º–º–∏—Ç —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ (–µ—Å–ª–∏ –±—ã–ª–∏)

**–†–∞–∑–¥–µ–ª 2: –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤**

```
## –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è CLAUDE.md
- <—Ñ–∞–π–ª>: <—á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ> (–∏–∑ –∑–∞–¥–∞—á–∏ #N)
- ...

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (—Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è)
- <–ø—Ä–æ–±–ª–µ–º–∞>: <–æ–ø–∏—Å–∞–Ω–∏–µ>, –∑–∞–¥–∞—á–∏ #N, #M, –ø–æ—Ç–µ—Ä—è ~X –º–∏–Ω
- ...

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ü–æ—Ç–µ—Ä—è–Ω–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã: ~X –º–∏–Ω
- –ü–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ attempt'—ã: N (–ø—Ä–∏—á–∏–Ω—ã: ...)
- CLAUDE.md –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: N
```

–ü–µ—Ä–µ–≤–µ–¥–∏ –∑–∞–¥–∞—á—É –≤ `done`.

### 8. –í—ã–≤–µ–¥–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç

```
‚úÖ BATCH CHECK COMPLETED

–ó–∞–¥–∞—á–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: project#X
–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∑–∞–¥–∞—á: N
–ù–∞–π–¥–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º: M
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: M

üìã –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤:
  CLAUDE.md –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: N
  –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º: M
  –ü–æ—Ç–µ—Ä—è–Ω–Ω–æ–µ –≤—Ä–µ–º—è: ~X –º–∏–Ω

–ö–æ–º–º–∏—Ç: <hash> (–µ—Å–ª–∏ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã** ‚Äî –ª–∏–Ω—Ç–µ—Ä—ã —É–∂–µ –ø—Ä–æ—à–ª–∏ –≤ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–µ
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è** ‚Äî –Ω–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å, —Ç–æ–ª—å–∫–æ —Ñ–∏–∫—Å–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫** ‚Äî –≤—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å –∏–∑ –∫–∞–∫–æ–π –∑–∞–¥–∞—á–∏ –ø—Ä–∏—à–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞
- **CLAUDE.md ‚Äî —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç—ã** ‚Äî –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è, –Ω–µ —Ç–µ–æ—Ä–∏–∏. –ï—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω –≤ —Ä–µ—à–µ–Ω–∏–∏ ‚Äî –Ω–µ –ø–∏—à–∏
